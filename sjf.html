<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SJF - Shortest Job First</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="btn-back">← Volver</a>
            <h1>SJF - Shortest Job First</h1>
        </div>

        <!-- Información del algoritmo -->
        <div class="info-panel">
            <h3> Características del Algoritmo SJF</h3>
            <ul>
                <li><strong>Criterio de Selección:</strong> Cuando la CPU está libre, se selecciona el proceso con el <strong>tiempo de ráfaga (t) más corto</strong> de entre los procesos que han llegado y están en la cola de listos.</li>
                <li><strong>No Expulsivo:</strong> Una vez que un proceso comienza su ráfaga de CPU, la ejecuta completamente hasta terminar o hasta bloquearse por E/S. No puede ser interrumpido por procesos recién llegados con ráfagas más cortas.</li>
                <li><strong>Desempate (FIFO):</strong> Si dos o más procesos tienen la misma duración de ráfaga, se selecciona el que llegó primero (menor tiempo de llegada).</li>
                <li><strong>Ventaja:</strong> Minimiza el tiempo de finalización promedio en comparación con FCFS.</li>
                <li><strong>Desventaja:</strong> Puede causar <strong>inanición</strong> - si llegan continuamente trabajos cortos, los trabajos largos pueden nunca ejecutarse.</li>
                <li><strong>Requisito:</strong> Es necesario conocer de antemano la duración de cada trabajo (tiempo de ráfaga).</li>
                <li><strong>Óptimo cuando:</strong> Se tienen simultáneamente todas las ráfagas disponibles desde el inicio.</li>
            </ul>
        </div>

        <!-- Panel de entrada de procesos -->
        <div class="input-panel">
            <h2>Configuración de Procesos</h2>
            <div class="process-inputs">
                <table id="processTable">
                    <thead>
                        <tr>
                            <th>Proceso</th>
                            <th>li (Llegada)</th>
                            <th>t (Ejecución)</th>
                            <th>Bloqueo inicio</th>
                            <th>Bloqueo duración</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody id="processTableBody">
                        <tr data-process="A">
                            <td>A</td>
                            <td><input type="number" class="arrival-time" min="0" value="0"></td>
                            <td><input type="number" class="burst-time" min="1" value="6"></td>
                            <td><input type="number" class="block-start" min="0" value="3"></td>
                            <td><input type="number" class="block-duration" min="0" value="2"></td>
                            <td><button class="btn-remove" onclick="removeProcess(this)">✕</button></td>
                        </tr>
                        <tr data-process="B">
                            <td>B</td>
                            <td><input type="number" class="arrival-time" min="0" value="1"></td>
                            <td><input type="number" class="burst-time" min="1" value="8"></td>
                            <td><input type="number" class="block-start" min="0" value="1"></td>
                            <td><input type="number" class="block-duration" min="0" value="3"></td>
                            <td><button class="btn-remove" onclick="removeProcess(this)">✕</button></td>
                        </tr>
                        <tr data-process="C">
                            <td>C</td>
                            <td><input type="number" class="arrival-time" min="0" value="2"></td>
                            <td><input type="number" class="burst-time" min="1" value="7"></td>
                            <td><input type="number" class="block-start" min="0" value="5"></td>
                            <td><input type="number" class="block-duration" min="0" value="1"></td>
                            <td><button class="btn-remove" onclick="removeProcess(this)">✕</button></td>
                        </tr>
                        <tr data-process="D">
                            <td>D</td>
                            <td><input type="number" class="arrival-time" min="0" value="4"></td>
                            <td><input type="number" class="burst-time" min="1" value="3"></td>
                            <td><input type="number" class="block-start" min="0" value="0"></td>
                            <td><input type="number" class="block-duration" min="0" value="0"></td>
                            <td><button class="btn-remove" onclick="removeProcess(this)">✕</button></td>
                        </tr>
                        <tr data-process="E">
                            <td>E</td>
                            <td><input type="number" class="arrival-time" min="0" value="6"></td>
                            <td><input type="number" class="burst-time" min="1" value="9"></td>
                            <td><input type="number" class="block-start" min="0" value="2"></td>
                            <td><input type="number" class="block-duration" min="0" value="4"></td>
                            <td><button class="btn-remove" onclick="removeProcess(this)">✕</button></td>
                        </tr>
                        <tr data-process="F">
                            <td>F</td>
                            <td><input type="number" class="arrival-time" min="0" value="6"></td>
                            <td><input type="number" class="burst-time" min="1" value="2"></td>
                            <td><input type="number" class="block-start" min="0" value="0"></td>
                            <td><input type="number" class="block-duration" min="0" value="0"></td>
                            <td><button class="btn-remove" onclick="removeProcess(this)">✕</button></td>
                        </tr>
                    </tbody>
                </table>
                <button id="addProcessBtn" class="btn-add">+ Agregar Proceso</button>
            </div>
            <button id="simulateBtn" class="btn-simulate">Simular</button>
        </div>

        <!-- Gráfica de Planificación -->
        <div class="gantt-panel">
            <h2>Gráfica de Planificación</h2>
            <div class="gantt-container">
                <div class="gantt-y-axis" id="ganttYAxis">
                    <!-- Etiquetas de procesos -->
                </div>
                <div class="gantt-chart-wrapper">
                    <div class="gantt-chart" id="ganttChart">
                        <!-- Barras del diagrama de Gantt -->
                    </div>
                    <div class="gantt-x-axis" id="ganttXAxis">
                        <!-- Etiquetas de tiempo -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabla de métricas -->
        <div class="metrics-panel">
            <table class="metrics-table">
                <thead>
                    <tr>
                        <th>Proceso</th>
                        <th>t (Ejecución)</th>
                        <th>Espera</th>
                        <th>if (Instante Fin)</th>
                        <th>T (Retorno)</th>
                        <th>Tiempo perdido</th>
                        <th>ip (Penalidad)</th>
                        <th>tr (Respuesta)</th>
                    </tr>
                </thead>
                <tbody id="metricsTableBody">
                    <!-- Métricas calculadas -->
                </tbody>
                <tfoot>
                    <tr>
                        <td><strong>Promedios:</strong></td>
                        <td>-</td>
                        <td id="avgWaiting">-</td>
                        <td>-</td>
                        <td id="avgTurnaround">-</td>
                        <td id="avgLostTime">-</td>
                        <td id="avgPenalty">-</td>
                        <td id="avgResponse">-</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <script src="sjf.js"></script>
</body>
</html>
